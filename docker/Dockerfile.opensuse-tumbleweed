FROM opensuse/tumbleweed:latest AS baseOS

RUN zypper install -y rpm-build nodejs12 mozilla-nss-tools libpcsclite1 pcsc-lite pcsc-ccid opensc g++  && zypper install --type pattern devel_basis

RUN mkdir /fortify
COPY . /fortify

WORKDIR /fortify
RUN npm ci && npm install --save-dev electron-installer electron-installer-redhat
RUN npm run build

CMD [ "/bin/bash -c \"npx electron-installer-redhat --config /fortify/config/config.suse.json \"" ]
